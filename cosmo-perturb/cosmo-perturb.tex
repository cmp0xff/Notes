\documentclass[a4paper,11pt]{article}
%\documentclass[a4\mfrakpa\mfrakper,11\mfrakpt]{scrartcl}



\input{../preambles/preamble}
\input{../preambles/unicode}

\setmainlanguage{english}
\setotherlanguages{german,greek,russian}

\input{../preambles/math-single}
\input{../preambles/math-brac}
\input{../preambles/math-thm}
\input{../preambles/phys-chem}

% \setromanfont[Mappping=tex-text]{Linux Libertine O}
% \setsansfont[Mapping=tex-text]{DejaVu Sans}
% \setmonofont[Mapping=tex-text]{DejaVu Sans Mono}

\usepackage[%style=authoryear-icomp,
			backend=biber]{biblatex}
\addbibresource{./cosmo-perturb.bib}

\title{Gauge Transformation and Perturbation of Canonical General 
Relativity}
\author{Yi-Fan Wang (王\ 一帆)}
%\date{}

\begin{document}
\maketitle

Gauge structure is one of the corner stones in modern theoretical physics. In 
particle physics, where fundamental interactions are modelled by Yang--Mills 
theories, gauge structure is an \emph{input} of the theoretical description, 
and mathematical physicists use redundant variables in the configuration space 
so that the gauge invariance is manifest.

In gravitational physics, things are less clear compared to the former case. On 
the one hand, if one follows the way by which a Yang--Mills theory would be 
constructed, one derives Poincar\'e gauge theories, which is much more generic 
than the acknowledged General Relativity. On the other hand, even if one starts 
with General Relativity, and call the reparametrisation 
invariance\footnote{Also known as diffeomorphism invariance or general 
covariance.} as a gauge invariance, one still faces another challenge, that in 
many applications, the theory is not written down with those variables where the 
gauge invariance is most manifest and the gauge transformation is simplest. The 
usage of the Arnowitt--Deser--Misner variables is such an example.

Let us be more specific. If one uses components of the metric 
$\cbr{g_{\mu\nu}}$ as the (superficial) degrees of freedom, where $\mu, \nu, 
\rho, \ldots$ runs from $0$ to $d$ and $d$ is the \emph{spatial} dimension, the 
gauge transformation of those configuration-space variables is related to the 
infinitesimal general coordinate 
transformation
\begin{align}
x^\mu \mapsto x^\mu - \rfun{\eta^\mu}{x} +
\rfun{\Omicron}{\eta^2}
\end{align}
by
\begin{align}
\dva g_{\mu\nu} &= \BbbL_\eta g_{\mu\nu} + \rfun{\Omicron}{\eta^2},
\nonumber \\
\BbbL_\eta g_{\mu\nu} &= \eta_{\mu;\nu} + \eta_{\nu;\mu}
= \eta^\lambda g_{\mu\nu,\lambda} + 
\eta^{\lambda}{}_{,\mu} g_{\lambda\nu} +
\eta^{\lambda}{}_{,\nu} g_{\mu\lambda}.
\label{eq:gauge-gmunu}
\end{align}
Here the generator of the general coordinate transformation $\rfun{\eta^\mu}{x}$ 
plays the role of gauge generator.

In the canonical formalism of General Relativity, the common practice is to use 
the Arnowitt--Deser--Misner variables $\cbr{N, N_i, h_{ij}}$ in configuration 
space, instead of $\cbr{g_{\mu\nu}}$. The former ones are related to the latter 
by
\begin{align}
g_{\mu\nu}\,\dd x^\mu\,\dd x^\nu = \dd s^2 = -N^2\,\dd t^2 + h_{ij}
\rbr{N^i\,\dd t + \dd x^i}\rbr{N^j\,\dd t + \dd x^j},
\label{eq:metric-Dirac-ADM}
\end{align}
where $N^i$ is understood as $h^{ij}N_j$, $h^{ij}$ are implicit functions 
of $h_{ij}$, and $i, j, k, \ldots$ runs from $1$ to $d$. One expects that 
$\cbr{N, N_i, h_{ij}}$ and $\cbr{g_{\mu\nu}}$ share the same gauge structure; 
however, the gauge transformation of the two variables looks quite different, 
as will become clear in our work.

In this work, it is the \emph{Hamiltonian} or \emph{canonical} formalism which 
is interested in, and the gauge structure will be described by gauge 
transformation in \emph{phase space}, instead of in configuration space. It is 
less well-known that one can also derive a canonical action consistently by 
using $\cbr{g_{\mu\nu}}$ and their conjugate momenta $\cbr{\mbfitrho^{\mu\nu}}$, 
as \citeauthor{Dirac1958} has done in \cite{Dirac1958}. The Dirac and the 
Arnowitt--Deser--Misner approaches have been compared, for instance, in
\cite{Kiriushcheva2008}, where some subtle differences have been shown; in 
particular, the gauge transformation (in the phase space) in the former case 
is drastically different than the latter one.
%(\crefrange{eq:gauge-Np}{eq:gauge-pij}).
This difference can be quantified, in the sense that the relation between 
$\cbr{\eta_\mu}$ and $\cbr{\xi_\perp, \xi_i}$, which are the gauge generator of 
the Dirac and Arnowitt--Deser--Misner approaches respectively, can be derived 
explicitly.

Here it goes with the plan. We would like to see if this difference has any 
consequence on the perturbation theory of General Relativity, for example, in 
the context of cosmological and black-hole perturbations. In particular, we 
would like to see if the gauge-invariant variables, for instance, the 
Mukhanov--Sasaki variables, could be changed from this perspective.

In order to do this, we start from the canonical formalism of General 
Relativity in the Arnowitt--Deser--Misner variables. We derive the gauge 
transformations of all the canonical variables by using the gauge generator 
derived by other authors (done), and construct the correspondence to the Dirac 
variables (not yet done, but others have done it).

Here is what is going on next. We then perturb the Hamiltonian action up to the 
second order on an arbitrary background with those variables directly. For the 
application in cosmology, we fix a Robertson--Walker background metric and 
discuss the gauge transformation of the perturbative coordinates and momenta.

If there are any positive outcomes, we could further investigate the 
application in the context of black-hole space-times.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Canonical transformation between the Dirac and ADM variables}
\label{sec:Dirac-ADM-canonical}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section we will see that the Dirac and the canonical 
Arnowitt--Deser--Misner  variables, $\cbr{g_{\mu\nu}; \mbfitrho^{\mu\nu}}$ and 
$\cbr{N, N_i, h_{ij}; \mfrakP, \mfrakP^i, \mfrakp^{ij}}$, are related by a 
canonical transformation, where in the momentum sector, coordinates and momenta 
\emph{mix up}.

This could be surprising, since one might expect that those canonical 
variables are related by a \emph{point transformation}. Since the 
transformation in configuration space is non-linear, one actually should expect 
a non-trivial transformation in the momentum sector.

From \cref{eq:metric-Dirac-ADM}, one can read off the relations between 
$\cbr{g_{\mu\nu}}$ and $\cbr{N, N_i, h_{ij}}$, motivating one to use the 
generating functional of the third type $F_3 = \sfun{F_3}{\mbfitrho^{\mu\nu}; 
N, N_i, h_{ij}}$. Then the relations can be written as
\begin{alignat}{5}
-N^2 + h^{ij} N_i N_j &=
g_{00} 
&&= -\frdva{F_3}{\mbfitrho^{00}},
\label{eq:g00nnh}\\
N_i &=
g_{i0}
&&= -\frdva{F_3}{\mbfitrho^{i0}}, \qquad
&g_{0i}
&= -\frdva{F_3}{\mbfitrho^{0i}},
\label{eq:g0innh}\\
h_{ji} &=
g_{ji}
&&= -\frdva{F_3}{\mbfitrho^{ji}}, \qquad
&g_{ij}
&= -\frdva{F_3}{\mbfitrho^{ij}};
\label{eq:gijnnh}
\end{alignat}
the inverse of \crefrange{eq:g00nnh}{eq:gijnnh} reads\footnote{We take $N > 0$; 
this has not been considered seriously.}
\begin{align}
N = \rbr{-g^{00}}^{-1/2},\qquad
N_i = g_{(i0)},\qquad
h_{ij} = g_{ij}.
\label{eq:inv-nnhg}
\end{align}
It is also useful to note that the transformations of the inverse metric is
\begin{alignat}{3}
g^{00} = -\frac{1}{N^2}, \qquad
g^{0i} &= g^{i0} = \frac{N^i}{N^2}, \qquad&
g^{ij} &= h^{ij}-\frac{N^i N^j}{N^2}; \\
N^i &= -\frac{g^{(0i)}}{g^{00}},\qquad&
h^{ij} &= g^{ij} - \frac{g^{(0i)}g^{(0j)}}{g^{00}}.
\end{alignat}
\Crefrange{eq:g00nnh}{eq:gijnnh} can be formally integrated to get
\begin{align}
F_3 = - \int \dd^3 x\,\cbr{\mbfitrho^{00}\rbr{-N^2+h^{ij}N_i N_j}
+\rbr{\mbfitrho^{0i}+\mbfitrho^{i0}} N_i + \mbfitrho^{ij}h_{ij}}.
\end{align}
Calculation shows that the momenta transform as
\begin{alignat}{3}
\mfrakP
&= -\frdva{F_3}{N} = -2 N \mbfitrho^{00}
&&= -\frac{2}{\rbr{-g^{00}}^{1/2}}\mbfitrho^{00},
\label{eq:Pinrho00}\\
\mfrakP^i
&= -\frdva{F_3}{N_i} = +2 N^i \mbfitrho^{00} + \mbfitrho^{0i} + \mbfitrho^{i0}
&&= -\frac{g^{0i}+g^{i0}}{g^{00}} \mbfitrho^{00}
+ \mbfitrho^{0i} + \mbfitrho^{i0},
\label{eq:Piinrho0i}\\
\mfrakp^{ij}
&= -\frdva{F_3}{h_{ij}} = -N^i N^j \mbfitrho^{00} + \mbfitrho^{ij}
&&= -\frac{g^{0i}g^{0j}}{\rbr{g^{00}}^2}\mbfitrho^{00} + \mbfitrho^{ij}.
\label{eq:pijinrhoij}
\end{alignat}
The inverse transformations of \crefrange{eq:Pinrho00}{eq:pijinrhoij} are
\begin{align}
\mbfitrho^{00} = -\frac{\mfrakP}{2N}, \quad
\mbfitrho^{0i} = \mbfitrho^{i0} =
\frac{\mfrakP^i}{2} + N^i \frac{\mfrakP}{2N}, \quad
\mbfitrho^{ij} = \mfrakp^{ij}-N^i N^j\frac{\mfrakP}{2N}.
\end{align}

One can verify that
\begin{align}
\mfrakP\,\dva N + \mfrakP^i\,\dva N_i + \mfrakp^{ij}\,\dva h_{ij} = 
\mbfitrho^{\mu\nu}\,\dva g_{\mu\nu}
\end{align}
holds, which is a criterion for the canonicality of a time-independent 
transformation; one may further verify that the fundamental Poisson brackets in 
the old\footnote{Note that $\sbr{g_{12}, \mbfitrho^{12}}_\text{P} \propto 
1/2$, not $1$!}
\begin{align}
\sbr{\rfun{g_{\mu\nu}}{x_1}, \rfun{\mbfitrho^{\rho\sigma}}{x_2}}_\text{P} &= 
\frac{1}{2} \rbr{
\mupdelta^\rho{}_\mu \mupdelta^\sigma{}_\nu +
\mupdelta^\sigma{}_\mu \mupdelta^\rho{}_\nu}
\rfun{\mbfitdelta^{(3)}}{x_1, x_2};
\end{align}
and new variables
\begin{align}
\begin{aligned}
\sbr{\rfun{N}{x_1}, \rfun{\mfrakP}{x_2}}_\text{P} &= 
\rfun{\mbfitdelta^{(3)}}{x_1, x_2},
\\
\sbr{\rfun{N_i}{x_1}, \rfun{\mfrakP^j}{x_2}}_\text{P} &=
\mupdelta^j{}_i
\rfun{\mbfitdelta^{(3)}}{x_1, x_2},
\\
\sbr{\rfun{h_{ij}}{x_1}, \rfun{\mfrakp^{kl}}{x_2}}_\text{P} &= 
\frac{1}{2} \rbr{
\mupdelta^k{}_i \mupdelta^l{}_j + \mupdelta^l{}_i \mupdelta^k{}_j}
\rfun{\mbfitdelta^{(3)}}{x_1, x_2};
\\
\sbr{\rfun{N}{x_1}, \rfun{\mfrakP^i}{x_2}}_\text{P} &=
\sbr{\rfun{N}{x_1}, \rfun{\mfrakp^{ij}}{x_2}}_\text{P} =
\sbr{\rfun{N^i}{x_1}, \rfun{\mfrakp^{jk}}{x_2}}_\text{P} = 0
\end{aligned}
\end{align}
are invariant.

To conclude, since the transformation is complicated in the momentum sector, 
one expects that the gauge transformations would also take a different form in 
the different variables of phase space. This will be investigated in 
\cref{sec:can-gauge-trsf}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Canonical actions and their first variations}
\label{sec:can-action-first-var}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The Lagrangian action for General Relativity in terms of the 
Arnowitt--Deser--Misner variables is \cite[ch.\ 4.2.2]{Kiefer2012}
\begin{align}
S &= \frac{1}{2\varkappa}\int\dd t\,\dd^d x\,N\cbr{\mfrakG^{ijkl}K_{ij}K_{kl}+
\sqrt{\mfrakh}\,\sfun{R}{h}}+\,\text{surface terms},
\label{eq:ADM-Lagrangian-action}
\end{align}
where
\begin{align}
\mfrakG_{ijkl} &\coloneqq \frac{1}{2\mfrakh^{1/2}}
\rbr{h_{ik}h_{lj}+h_{il}h_{kj}-h_{ij}h_{kl}}
\equiv -\frdva{\rbr{\mfrakh^{-1/2}h_{ij}}}{h^{kl}},\\
\mfrakG^{ijkl} &\coloneqq \frac{\mfrakh^{1/2}}{2}
\rbr{h^{ik}h^{lj}+h^{il}h^{kj}-2h^{ij}h^{kl}}
\equiv -\mfrakh^{-1/2}\frdva{\rbr{\mfrakh h^{ij}}}{h_{kl}}
\end{align}
are the DeWitt metric and its inverse. We emphasise that 
\cref{eq:ADM-Lagrangian-action} is expected to be \emph{identical} to the 
Einstein--Hilbert action with proper boundary terms of the 
Gibbons--Hawking--York type.

\Cref{eq:ADM-Lagrangian-action} leads to the canonical action
\begin{align}
S &=
\int\dd t\,\dd x^d\,\Big\{
\mfrakp^{ij}\dot{h}_{ij} + \mfrakP\dot{N} + \mfrakP^i \dot{N}_i
-N\mfrakH_\text{G}^\perp - N_i\mfrakH_\text{G}^i
\nonumber \\
&\qquad\qquad
- \mfrakP V - \mfrakP^i V_i\Big\} +\,\text{surface terms},
\label{eq:ADM-Hamiltonian-action}
\end{align}
where $\mfrakP$ and $\mfrakP^i$ are the primary constraints,
\begin{align}
\mfrakH_\text{G}^\perp &=
2 \varkappa\,\mfrakG_{ijkl} \mfrakp^{ij}\mfrakp^{kl}
- \frac{\sqrt{\mfrakh}}{2\varkappa} \sfun{R}{h}
\equiv
2 \varkappa\,\mfrakF^{ijkl} h_{ij}h_{kl}
- \frac{\sqrt{\mfrakh}}{2\varkappa} \sfun{R}{h},
\\
\mfrakH_\text{G}^i &=
-2 \mfrakp^{ij}{}_{|j}
\end{align}
are the secondary constraints, and
\begin{align}
\mfrakF^{ijkl} &\coloneqq \frac{1}{2\mfrakh^{1/2}}
\rbr{\mfrakp^{ik}\mfrakp^{jl}+\mfrakp^{il}\mfrakp^{kj}
-\mfrakp^{ij}\mfrakp^{kl}}
\end{align}
is a convenient notation. In \cref{eq:ADM-Hamiltonian-action}, $V$ and $V_i$ 
are velocities of $N$ and $N_i$ and play the role of Lagrange 
multipliers. Details about the action with velocities can be found in 
\cite{Gitman1990}; those about the surface terms can be found in \cite[ch.\ 
4.2]{Poisson2004} and the references therein.

As for the canonical action in the Dirac variables, it can be derived in two 
ways. One is to start from \cref{eq:ADM-Lagrangian-action} and substitute the 
coordinate-space transformation in \cref{eq:inv-nnhg}; the other is to start 
from \cref{eq:ADM-Hamiltonian-action} and use the canonical transformation in
\cref{eq:inv-nnhg} and \crefrange{eq:Pinrho00}{eq:pijinrhoij}. 
\citeauthor{Kiriushcheva2008} claimed \cite{Kiriushcheva2008} that the two 
approaches give different results.

Using the results in \cref{ssec:first-var}, the first variation of 
\cref{eq:ADM-Hamiltonian-action} can be derived to be
\begin{align}
&
\dva S = \int\dd t\,\dd^3 x \,\Big\{ -
\rbr{\dot{\mfrakp}^{ij} - \rfun{\mscrP^{ij}}{N, N_i}}\,\dva h_{ij} +
\rbr{\dot{h}_{ij} - \rfun{\mscrH_{ij}}{N, N_i}}\,\dva \mfrakp^{ij}
\nonumber \\
&\quad-
\rbr{\dot{\mfrakP} + \mfrakH_\text{G}^\perp}\,\dva N -
\rbr{\dot{\mfrakP}^i + \mfrakH_\text{G}^i}\,\dva N_i +
\rbr{\dot{N} - V}\,\dva \mfrakP + 
\rbr{\dot{N}_i - V_i}\,\dva \mfrakP^i
\nonumber \\
&\quad-
\mfrakP\,\dva V - \mfrakP^i\,\dva V_i
\Big\},
\label{eq:first-variation-ADM-100}
\end{align}
where
\begin{align}
\rfun{\mscrH_{ij}}{N, N_i} &\coloneqq
2\rbr{2\varkappa\,N\mfrakG_{ijkl}\mfrakp^{kl} + N_{(i|j)}},
\label{eq:mscrHij-100} \\
\rfun{\mscrP^{ij}}{N, N_i} &\coloneqq
2 \varkappa\,N\rbr{\frac{1}{2}h^{ij} \mfrakF^{klmn} h_{mn}
- 2 \mfrakF^{ijkl}} h_{kl}
\nonumber \\
&\quad\,
+\frac{1}{2\varkappa}
\rbr{-N\sqrt{\mfrakh}\,\sfun{G^{ij}}{h}
+\mfrakG^{ijkl} N_{|k|l}}
\nonumber \\
&\quad\,
-\cbr{\rbr{h^{ki}\mfrakp^{jl}+h^{kj}\mfrakp^{il}-h^{kl}\mfrakp^{ij}}N_k}_{|l}.
\label{eq:mscrPij-100}
\end{align}
Also notes that in \cref{eq:first-variation-ADM-100} no further boundary term 
is present; those in \cref{eq:ADM-Hamiltonian-action} have all been used to 
eliminate the boundary integral with first derivatives.

If one would like to find the canonical action in the Dirac variables, one could 
begin with the Lagrangian action in \cref{eq:ADM-Lagrangian-action}, where the 
variables with time derivative has been separated from those without, and 
transform the Arnowitt--Deser--Misner variables to the Dirac ones by using 
\crefrange{eq:g00nnh}{eq:gijnnh}. In contrast with the original approach by 
Dirac, which starts from the Einstein--Hilbert action, this approach starts with 
something where the dynamical and non-dynamical variables have already been 
separated explicitly, so that the calculation is expected to be simpler.

(I probably need to derive this)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Infinitesimal canonical gauge transformation}
\label{sec:can-gauge-trsf}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this section the infinitesimal gauge transformation of General Relativity 
will be constructed in terms of the canonical variables, namely in phase 
space. The results with the Arnowitt--Deser--Misner variables and the Dirac 
variables will be worked out separately. In the former case, one sees that the 
lapse and shift functions as well as their conjugate momenta are also involved 
in the gauge transformation, and the action has to contain them in order to be 
invariant under the transformation.

%%%%%%%%%%%%%%%%
\subsection{The Arnowitt--Deser--Misner canonical variables}

%%%%%%%%%%%%%%%%

(I need to derive this)

The gauge transformations of the canonical Arnowitt--Deser--Misner variables are 
generated by \cite{Castellani1982} 
\begin{align}
G &= -\int\dd^3 x\,\Big\{ \sbr{
	\xi_\perp \rbr{
		\mfrakH_\text{G}^\perp + N_{|i} \mfrakP^i + \rbr{N\mfrakP^i}_{|i} + 
			\rbr{N_i \mfrakP}^{|i}} +
	\dot{\xi}_\perp \mfrakP}
\nonumber \\
&\qquad\qquad\ \,+ \sbr{
	\xi_i \rbr{
		\mfrakH_\text{G}^i + N_j{}^{|i} \mfrakP^j + \rbr{N_j \mfrakP^i}^{|j} + 
N^{|i} 
\mfrakP} +
	\dot{\xi}_i \mfrakP^i} \Big\}
\nonumber \\
&\quad\,
+\,\text{boundary terms},
\end{align}
where the boundary terms have probably not been discussed so far, but are 
surely needed for non-compact spatial topologies in order to cancel the second 
spatial derivatives in the potential term in $\mfrakH_\text{G}^\perp$. The 
infinitesimal 
gauge transformations of $\cbr{N, N_i; \mfrakP, \mfrakP^i}$ are 
\cite{Kiriushcheva2008}
\begin{align}
\dva N &= \sbr{N, G}_\text{P} = 
\xi_\perp{}^{|i} N_i - \dot{\xi}_\perp - \xi_i N^{|i},
\label{eq:gauge-Np} \\
\dva N_i &= %\sbr{N_i, G}_\text{P} =
- \xi_\perp N_{|i} + \xi_\perp{}_{|i} N
- \xi_j N_{i}{}^{|j} + \xi_i{}^{|j} N_j - \dot{\xi}_i;
\label{eq:gauge-Ni} \\
\dva \mfrakP &= -\rbr{\xi_\perp \mfrakP^i}_{|i} - \xi_\perp{}_{|i} \mfrakP^i
- \rbr{\xi_i \mfrakP}^{|i},
\label{eq:gauge-Pp} \\
\dva \mfrakP^i &= -\xi_\perp{}^{|i} \mfrakP
- \rbr{\xi_j \mfrakP^i}^{|j} - \xi_j{}^{|i}\mfrakP^j,
\label{eq:gauge-Pi}
\end{align}
where only the primary constraints are involved; transformations of 
$\cbr{g_{ij}; \mfrakp^{ij}}$ are
\begin{align}
\dva h_{ij} &= -\frpa{}{\mfrakp^{ij}}
\rbr{\xi_\perp \mfrakH_\text{G}^\perp + \xi_i \mfrakH_\text{G}^i} =
-\rfun{\mscrH_{ij}}{\xi_\perp, \xi_i},
% \nonumber \\
% &= -\xi^\perp\,4\varkappa\,\mfrakG_{ijkl}\mfrakp^{kl}
% - \xi_{i|j} - \xi_{j|i},
\label{eq:gauge-hij} \\
\dva \mfrakp^{ij} &= \frpa{}{h_{ij}}
\rbr{\xi_\perp \mfrakH_\text{G}^\perp + \xi_i \mfrakH_\text{G}^i} =
-\rfun{\mscrP^{ij}}{\xi_\perp, \xi_i},
% \nonumber \\
% &=
% 2\varkappa\,\xi_\perp\rbr{ -\frac{1}{2}h^{ij} \mfrakF^{klmn} h_{mn}
% + 2 \mfrakF^{ijkl}} h_{kl}
% \nonumber \\
% &\quad\,
% +\frac{1}{2\varkappa}
% \rbr{ \sqrt{\mfrakh}\,\xi_\perp\sfun{G^{ij}}{h}
% -\mfrakG^{ijkl}\rbr{\xi_{\perp}}_{|k|l}}
% \nonumber \\
% &\quad\,
% +\cbr{\rbr{\mfrakp^{il}h^{kj}+\mfrakp^{jl}h^{ki}
% -\mfrakp^{ij}h^{kl}}\xi_k}_{|l},
\label{eq:gauge-pij}
\end{align}
where only the secondary constraints are involved, and surface contribution 
has not been written down explicitly. 
%$\sfun{G^{ij}}{h} = \sfun{R^{ij}}{h} - h^{ij}\sfun{R}{h}/2$, and

% \Crefrange{eq:gauge-hij} could be different than what one would expect from 
% \cref{eq:gauge-gmunu}. In \cref{sec:Dirac-ADM-canonical} we will try to 
% understand this discrepancy.

%%%%%%%%%%%%%%%%
\subsection{The canonical Dirac variables}

%%%%%%%%%%%%%%%%

(I probably need to work out the generator as well)

The infinitesimal gauge transformations, parametrised by $\eta_\mu$, of the 
Dirac canonical variables are
\begin{align}
\dva g_{\mu\nu} &= \eta_{\mu;\nu} + \eta_{\nu;\mu} =
\eta^\lambda g_{\mu\nu,\lambda} + \eta^{\lambda}{}_{,\mu}g_{\lambda\nu}
+\eta^{\lambda}{}_{,\nu}g_{\mu\lambda},
\tag{\ref{eq:gauge-gmunu} rev.} \\
\dva \mbfitrho^{\mu\nu} &= \rbr{\eta^\lambda \mbfitrho^{\mu\nu}}_{,\lambda}
- \eta^\mu{}_{,\lambda}\mbfitrho^{\lambda\nu}
- \eta^\nu{}_{,\lambda}\mbfitrho^{\mu\lambda},
\end{align}
which have a manifest geometric meaning of a infinitesimal coordinate 
transformation. How to proceed with these? It seems
\begin{align}
\dva\rbr{\mbfitrho^{\mu\nu} \dot{g}_{\mu\nu}} =
\rbr{\eta^\lambda \mbfitrho^{\mu\nu} \dot{g}_{\mu\nu}}_{,\lambda} +
\mbfitrho^{\mu\nu}\rbr{\dot{\eta}_{\mu;\nu}+\dot{\eta}_{\nu;\mu}},
\end{align}
assuming $\partial_t$ and $\dva$ commute.


The relation between $\eta_\mu$ and $\cbr{\xi_\perp, \xi_i}$ are
\begin{align}
\eta_0 &= ,
\\
\eta_i &= .
\end{align}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Second variation of the canonical ADM action}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{align}
\dva^2 S &=
\end{align}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Canonical perturbation of the Klein--Gordon field in curved space-time}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{align}
\mfrakL = \sqrt{-\mfrakg}\rbr{-\frac{1}{2}g^{\mu\nu}\phi_{;\mu}\phi_{;\nu}
-\rfun{V}{\phi}}.
\end{align}
\cite[ch.\ 4.2.2]{Kiefer2012}
% \begin{align}
% \mfrakH^\perp_\text{m} &= \sqrt{\mfrakh}\,\rho
% \coloneqq \sqrt{\mfrakh}\,T_{\mu\nu} n^\mu n^\nu,\\
% \mfrakH^i_\text{m} &= 
% \end{align}
\begin{align}
\mfrakH^\perp_\text{KG} &= \frac{\mbfitpi^2}{2\sqrt{\mfrakh}} + \sqrt{\mfrakh}
\rbr{\frac{1}{2}h^{ij}\phi_{|i}\phi_{|j}+\rfun{V}{\phi}},\\
\mfrakH^i_\text{KG} &= \mbfitpi \phi^{|i}.
\end{align}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Canonical perturbation of the Friedmann--Lema\^itre--Klein--Gordon 
model}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{align}
\dd s^2 = -\rfun{N^2}{t}\,\dd t^2 + \rfun{a^2}{t}\,\dd \vec{x}^2
\end{align}

$\rfun{h_{ij}}{\vec{x}} = \rfun{a^2}{t}\mupdelta_{ij}\,
\rfun{\mbfitdelta^3}{\vec{x}-\vec{x}'}$.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Acknowledgement}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\appendix

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Some useful results}
\label{sec:useful-results}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Here some useful intermediate results are collected.

%%%%%%%%%%%%%%%%
\subsection{For the first variations}
\label{ssec:first-var}
%%%%%%%%%%%%%%%%

The variation of $N$ with respect to $\cbr{g_{\mu\nu}}$ reads
\begin{align}
\dva N &= \frac{1}{2}\rbr{-g^{00}}^{-3/2}\,\dva g^{00}
\\
&= \frac{1}{2}\rbr{-\sqrt{-g^{00}}\,\dva g_{00}
+\frac{g^{0i}\,\dva g_{0i}+g^{i0}\,\dva g_{i0}}{\rbr{-g^{00}}^{1/2}}
-\frac{g^{0i}g^{0j}}{\rbr{-g^{00}}^{3/2}}\,\dva g_{ij}}.
\end{align}

The first variation of the inverse metric $h^{ij}$ reads
\begin{align}
\dva h^{ij} = -h^{ik}h^{jl}\,\dva h_{kl} = - h^{i(k}h^{l)j}\,\dva h_{kl}.
\end{align}

The first variation of $\mfrakh = \det h_{ij}$ reads
\begin{align}
\dva \mfrakh = \mfrakh h^{ij}\,\dva h_{ij}.
\end{align}

The first variation of $\Gamma^i{}_{jk}$ can be obtained in normal coordinates,
which reads
\begin{align}
\dva \Gamma^{i}{}_{jk} &= \frac{1}{2} h^{il}
\cbr{-\rbr{\dva h_{jk}}_{|l} + \rbr{\dva h_{kl}}_{|j} + \rbr{\dva h_{lj}}_{|k}}
\\
&= \frac{1}{2} \cbr{-h^{il}\mupdelta^m{}_j\mupdelta^n{}_k
+h^{in}\mupdelta^l{}_j\mupdelta^m{}_k
+h^{im}\mupdelta^n{}_j\mupdelta^l{}_k}\,\rbr{\dva h_{mn}}_{|l}.
\end{align}

The first variations of $\sfun{R_{ij}}{h}$ and $\sfun{R^{ij}}{h}$ are
\begin{align}
\dva \sfun{R_{ij}}{h} &=
\rbr{\dva\Gamma^k{}_{ji}}_{|k} - \rbr{\dva\Gamma^k{}_{ki}}_{|j},
\label{eq:dva-Rij-low}
% \\
% &=
% \frac{1}{2}\rbr{\dva h_{kl}}_{|m|n}\,\big(
% \mupdelta^k{}_ih^{ln}\mupdelta^m{}_j+
% \mupdelta^m{}_i\mupdelta^l{}_jh^{kn}
% \nonumber \\
% &\qquad\qquad
% -\mupdelta^k{}_i\mupdelta^l{}_jh^{mn}
% -\mupdelta^m{}_i\mupdelta^n{}_jh^{kl}\big),
\\
\dva \sfun{R^{ij}}{h} &=
-2R^{k(i}h^{j)l}\,\dva h_{kl} + h^{k(i}\,\bar{\dva}u^{j)l}{}_{k|l}
\label{eq:var-Rijhu} \\
&= -2R^{k(i}h^{j)l}\,\dva h_{kl}
\nonumber \\
&\quad\,+
\rbr{h^{l(i}h^{j)[m}h^{k]n}+
\frac{1}{2\mfrakh^{1/2}} h^{m(i}\mfrakG^{j)nkl}}\,\rbr{\dva h_{kl}}_{|m|n},
\label{eq:dva-Rijhu-2}
\end{align}
where
\begin{align}
\bar{\dva}u^{ij}{}_{k} &\coloneqq
h^{il}\,\dva\Gamma^{j}{}_{lk} - h^{ij}\,\dva\Gamma^{l}{}_{lk}
\end{align}
is related to the boundary terms, and \cref{eq:hki-dva-ujlk|l} has been used
to obtain \cref{eq:dva-Rijhu-2}.
\Cref{eq:dva-Rij-low} can be obtained in normal coordinates.

For the first variation of the constraints, one also needs
\begin{align}
\bar{\dva}u^{ji}{}_{j} = \rbr{\dva h_{kl}}_{|j}
\rbr{h^{i(k}h^{l)j}-h^{ij}h^{kl}}
= \mfrakh^{-1/2}\mfrakG^{ijkl}\,\rbr{\dva h_{kl}}_{|j}.
\label{eq:dva-ujij}
\end{align}
\Cref{eq:dva-ujij} is consistent with \cref{eq:dva-uikj|k}.
Therefore, 
\begin{align}
\sqrt{\mfrakh}\,N \,\bar{\dva}u^{ji}{}_{j|i} =
\dva h_{ij}\,\mfrakG^{ijkl}N_{|k|l}
+\cbr{\mfrakG^{ijkl}
\rbr{N\,\rbr{\dva h_{kl}}_{|j} - N_{|j}\,\dva h_{kl}} }_{|i}.
\end{align}

In the Hamiltonian constraint, the first variation of the `kinetic term'
$\mfrakG_{ijkl}\mfrakp^{ij}\mfrakp^{kl} \equiv
\mfrakF^{ijkl}h_{ij}h_{kl}$ reads
\begin{align}
&\quad\,\dva\rbr{ \mfrakG_{ijkl} \mfrakp^{ij}\mfrakp^{kl}}
\equiv \dva\rbr{\mfrakF^{ijkl}h_{ij}h_{kl}}
\\
&=\dva h_{ij}\,\rbr{-\frac{1}{2} h^{ij} \mfrakF^{klmn} h_{mn}
+ 2 \mfrakF^{ijkl} } h_{kl} 
+\dva \mfrakp^{ij}\,2 \mfrakG_{ijkl}\mfrakp^{kl}.
\label{eq:dva-Fhh}
\end{align}
\Cref{eq:dva-Fhh} is consistent with \cref{eq:dva-Fh}.

Equipped with \cref{eq:dva-ujij,eq:var-Rijhu}, the first variation of the 
`potential' 
$\sqrt{\mfrakh}\,\sfun{R}{h}$ reads
\begin{align}
\dva\rbr{\sqrt{\mfrakh}\,\sfun{R}{h}} &= \sqrt{\mfrakh}\,
\rbr{-\sfun{G^{ij}}{h}\,\dva h_{ij} +
\bar{\dva}u^{ji}{}_{j|i}}
\\
&= -\sqrt{\mfrakh}\,\sfun{G^{ij}}{h}\,\dva h_{ij} +
\mfrakG^{ijkl}\,\rbr{\dva h_{kl}}_{|j|i}.
\end{align}

One can now write down the first variation of $N\mfrakH_\text{G}^\perp$ with 
respect to 
$\cbr{h_{ij}, \mfrakp^{ij}}$,
\begin{align}
N\,\dva \mfrakH_\text{G}^\perp &= \dva h_{ij}\,\bigg\{
2\varkappa\,N\rbr{ -\frac{1}{2}h^{ij} \mfrakF^{klmn} h_{mn}
+ 2 \mfrakF^{ijkl}} h_{kl}
\nonumber \\
&\quad\,
+\frac{1}{2\varkappa}
\rbr{ \sqrt{\mfrakh}\,N\sfun{G^{ij}}{h}
-\mfrakG^{ijkl}N_{|k|l}}\bigg\}
\nonumber \\
&\quad\,
+\dva \mfrakp^{ij}\,4\varkappa\,N\mfrakG_{ijkl}\mfrakp^{kl}
\nonumber \\
&\quad\,
-\frac{1}{2\varkappa}
\cbr{\mfrakG^{ijkl}
\rbr{N\,\rbr{\dva h_{kl}}_{|j} - N_{|j}\,\dva h_{kl}} }_{|i},
\end{align}
where the terms in the last line will be pushed to the spatial boundary
$\partial\Sigma$; the second term vanishes by $\fat{\dva 
h_{ij}}{\partial\Sigma} 
= 0$, whereas the first one is cancelled by the boundary term.

Finally, the first variation of $N_i \mfrakH_\text{G}^i$ with respect to 
$\cbr{h_{ij},
\mfrakp^{ij}}$ is easier,
\begin{align}
&
N_i\,\dva \mfrakH_\text{G}^i = \dva h_{ij}\,
\cbr{\rbr{h^{ki}\mfrakp^{jl}+h^{kj}\mfrakp^{il}-h^{kl}\mfrakp^{ij}}N_k}_{|l}
+\dva \mfrakp^{ij}\,2N_{(i|j)}
\nonumber \\
&\qquad
- \rbr{-h^{il}\mupdelta^m{}_j\mupdelta^n{}_k
+h^{in}\mupdelta^l{}_j\mupdelta^m{}_k
+h^{im}\mupdelta^n{}_j\mupdelta^l{}_k}
\rbr{N_i\mfrakp^{jk}\,\dva h_{mn}}_{|l}
\nonumber \\
&\qquad
- 2\rbr{\dva \mfrakp^{ij}\,N_{j}}_{|i},
\end{align}
where the last two lines will be pushed to the spatial boundary and vanish by
$\fat{\dva h_{ij}}{\partial\Sigma} = 0 =
\fat{\dva \mfrakp^{ij}}{\partial\Sigma}$. The results can be checked with 
\cite[ch.\ 4.2.7]{Poisson2004}.

%%%%%%%%%%%%%%%%
\subsection{For the second variations}
\label{ssec:second-var}
%%%%%%%%%%%%%%%%

From \crefrange{eq:first-variation-ADM-100}{eq:mscrPij-100} one sees that in 
order to calculate the second variation of the canonical 
Arnowitt--Deser--Misner action, the following variations needs to be 
calculated, in addition to those calculated in \cref{ssec:first-var}.

First variation of $\mfrakG^{ijkl}$
\begin{align}
\dva \mfrakG^{ijkl} &= \rbr{\frac{1}{2}\mfrakG^{ijkl} h^{mn}
-h^{m(i} \mfrakG^{j)nkl} - \mfrakG^{ijk(l} h^{k)m}} \,\dva h_{mn}.
\end{align}
(check!)

First variation of $\mfrakF^{ijkl}h_{kl}$
\begin{align}
\dva\rbr{\mfrakF^{ijkl}h_{kl}} &= \dva h_{kl}\,
\rbr{-\frac{1}{2}\mfrakF^{ijmn}h^{kl}h_{mn}+\mfrakF^{ijkl}}
\nonumber \\
&\quad\,+
\dva \mfrakp^{kl} \, h^{i(p}h^{q)j} \rbr{
h_{kp} \mfrakG_{qlmn} + \mfrakG_{klmp} h_{qn}}\mfrakp^{mn}.
\label{eq:dva-Fh}
\end{align}
\Cref{eq:dva-Fh} is consistent with \cref{eq:dva-Fhh}.

Concerning the derivative of $\bar{\dva}u^{ij}{}_k$, one needs
\begin{align}
&\quad\,
\bar{\dva}u^{ik}{}_{j|k} 
\nonumber \\
&=
\rbr{\dva h_{kl}}_{|m|n}\,
\frac{1}{2} \rbr{h^{i[m} h^{k]n} \delta^l{}_j + h^{i[m}h^{l]n} \delta^k{}_j
+ \frac{1}{\sqrt{\mfrakh}} \mfrakG^{inkl} \delta^m{}_j}.
\label{eq:dva-uikj|k}
\end{align}
\Cref{eq:dva-uikj|k} is consistent with \cref{eq:dva-ujij}, and leads to.
\begin{align}
h^{k(i}\,\bar{\dva}u^{j)l}{}_{k|l} &=
\rbr{\dva h_{kl}}_{|m|n}\,\rbr{h^{l(i}h^{j)[m}h^{k]n}
+\frac{1}{2\mfrakh^{1/2}} h^{m(i}\mfrakG^{j)nkl}}.
\label{eq:hki-dva-ujlk|l}
\end{align}

The following results are not yet solid.

First variation of $\mfrakG_{ijkl}\mfrakp^{kl}$
\begin{align}
\dva\rbr{\mfrakG_{ijkl}\mfrakp^{kl}} &= \dva h_{kl}\,
\rbr{-\frac{1}{2}\mfrakG_{ijmn}h^{kl}+
\mupdelta^{k}{}_{i}\mfrakG^{l}{}_{jmn}+
\mupdelta^{k}{}_{m}\mfrakG^{l}{}_{nij}}\mfrakp^{mn}
\nonumber \\
&\quad\,
+\dva p^{kl}\,\mfrakG_{ijkl}.
\end{align}

First variation of $\sqrt{\mfrakh}\,\sfun{G^{ij}}{h}$
\begin{align}
&
\dva\rbr{\sqrt{\mfrakh}\,\sfun{G^{ij}}{h}}
= \sqrt{\mfrakh}\bigg\{\dva h_{kl}\cdot
\nonumber \\
&\qquad\quad
\rbr{-\frac{1}{2}}\rbr{
R^{ik}h^{lj}+R^{il}h^{kj}-R^{ij}h^{kl}+h^{ik}G^{lj}+h^{il}G^{kj}-h^{ij}G^{kl}}
\nonumber \\
&\quad
+\rbr{h^{il}\,\bar{\dva}u^{jk}{}_{l}
- \frac{1}{2}h^{ij}\,\bar{\dva}u^{lk}{}_{l}}_{|k} \bigg\}.
\end{align}



About $\bar{\dva}u^{ij}{}_{k}$, the identity
\begin{align}
&
\sqrt{\mfrakh}\,N h^{k(i}\,\bar{\dva}u^{j)l}{}_{k|l} =
% \sqrt{\mfrakh}\,\rbr{N h^{ij}\,\bar{\dva}u^{jl}{}_k
% -N_{|k}\rbr{\ldots}^{ijmn}\,\dva h_{mn}}_{|l}
% \nonumber \\
% &\qquad
% -\sqrt{\mfrakh}\,N_{|k|l}\rbr{\ldots}^{ijmn}\,\dva h_{mn}
\end{align}
is also useful.
% , where
% \begin{align}
% \rbr{\ldots}^{ijmn} \coloneqq
% -h^{im}h^{j[k}h^{n]l}+h^{in}h^{j[k}h^{l]m}+h^{il}h^{j[k}h^{m]n};
% \end{align}

%, which is not desired. 
% Being a covariant divergence of a vector, it can be pushed to the 
% boundary upon variation of the action, and will be cancelled by the boundary 
% terms.

Second variation of $N \mfrakH_\text{G}^\perp$
\begin{align}
&\quad\,
\dva^2\rbr{N \mfrakH_\text{G}^\perp}
\nonumber \\
&= \dva h_{ij}\,\dva h_{kl}\,\bigg\{ 2\varkappa\bigg[
\frac{1}{4}\rbr{h^{ik}h^{lj}+h^{il}h^{kj}+h^{ij}h^{kl}} \mfrakF^{mnrs} 
h_{mn} h_{rs}
\nonumber \\
&\qquad\qquad\qquad
-\rbr{h^{ij}\mfrakF^{klmn}+\mfrakF^{ijmn}h^{kl}}h_{mn}
+\mfrakF^{ijkl} \bigg]
\nonumber \\
&\qquad\quad
-\frac{\sqrt{\mfrakh}}{4\varkappa}\rbr{
R^{ik}h^{lj}+R^{il}h^{kj}-R^{ij}h^{kl}+h^{ik}G^{lj}+h^{il}G^{kj}-h^{ij}G^{kl}}
\bigg\}
\nonumber \\
&\quad\,
+\dva h_{ij}\,\frac{\sqrt{\mfrakh}}{2\varkappa}
\rbr{h^{il}\,\bar{\dva}u^{jk}{}_{l}
- \frac{1}{2}h^{ij}\,\bar{\dva}u^{lk}{}_{l}}_{|k} 
\nonumber \\
&\quad\,
+\dva h_{ij}\,\dva \mfrakp^{kl}\,4\varkappa
\cbr{-h^{ij}\mfrakG_{klmn}+2\rbr{\mupdelta^i{}_k\mfrakG^{j}{}_{lmn} 
+\mupdelta^i{}_m\mfrakG^{j}{}_{nkl}} } \mfrakp^{mn}
\nonumber \\
&\quad\,
+\dva p^{ij}\,\dva p^{kl}\,4\varkappa \mfrakG_{ijkl}
\nonumber \\
&\quad\,
-\dva h_{ij}\,
\dva\rbr{\,\frac{\sqrt{\mfrakh}}{2\varkappa}\,\bar{\dva}u^{lk}{}_{l|k}}.
\end{align}

Second variation of $\Gamma^i{}_{jk}$
\begin{align}
\dva^2 \Gamma^i{}_{jk} &=
- h^{im} \,\dva\Gamma^{l}{}_{jk} \,\dva h_{lm}.
\end{align}

Second variation of $\mfrakH_\text{G}^i$
\begin{align}
\dva^2\rbr{\mfrakH_\text{G}^i} = -h^{im}p^{jk}
\,\dva\Gamma^{l}{}_{jk}\,\dva h_{lm} + 2\,\dva\Gamma^{i}{}_{jk}\,\dva p^{jk}.
\end{align}


\subsection*{Other second variations}

Second variation of $h^{ij}$
\begin{align}
\dva^2 h^{ij} = \rbr{h^{im}h^{jl}h^{kn}+h^{ik}h^{jm}h^{ln}}
\,\dva h_{kl}\,\dva h_{mn}
\end{align}

Second variation of $\mfrakh = \det h_{ij}$
\begin{align}
\dva^2 \mfrakh = -\frac{1}{4} \mfrakh \rbr{
h^{ik}h^{jl}+h^{il}h^{kj}-h^{ij}h^{kl}}\,\dva h_{ij}\,\dva h_{kl}.
\end{align}

First variation of $\rbr{\dva h_{ij}}_{|k}$
\begin{align}
\dva\cbr{\rbr{\dva h_{ij}}_{|k}} = -2 \dva\Gamma^l{}_{k(i}\,\dva h_{j)l}.
\end{align}

% Second variation of $\sqrt{\mfrakh}\sfun{R}{h}$
% \begin{align}
% &
% \dva^2\rbr{\sqrt{\mfrakh}R} = \sqrt{\mfrakh} \bigg\{
% \dva h_{ij}\,\dva h_{kl}\bigg[
% \frac{1}{4}R\rbr{h^{ik}h^{jl}+h^{il}h^{jk}-h^{ij}h^{kl}}
% \nonumber \\
% &\qquad
% +\frac{1}{2}\rbr{
% R^{ij}h^{kl}+R^{kl}h^{ij}-R^{ik}h^{jl}-R^{il}h^{jk}-R^{jk}h^{il}-R^{il}h^{kj}}
% \bigg]
% \nonumber \\
% &\quad
% +h^{ik}\,\bar{\dva}u^{jl}{}_{k|l}+\dva\rbr{\bar{\dva}u^{ji}{}_{j|i}} \bigg\}
% \end{align}


In a general background, the second variations of the quantities are much more 
tedious.

In Robertson--Walker background, 


\printbibliography

\end{document}
